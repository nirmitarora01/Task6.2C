pipeline {
    agent any

    stages {
        stage {
            steps {
                echo 'Build'
                echo 'Description: Build the React application using a bundler like Webpack or Vite to compile and package the code. Tool used: Webpack or Vite'
            }
        }

        stage {
            steps {
                echo 'Unit and Integration Tests'
                echo 'Description: Run unit tests using Jest or other testing frameworks to ensure the React components and functionality work as expected. Additionally, run integration tests using tools like Cypress or Selenium to test the application as a whole. Tools used: Jest, Cypress, or Selenium'
            }
            post {
                success {
                    emailext attachLog: true, body: "Unit and Integration Tests passed successfully.", subject: "Pipeline Notification: Stage 2 Passed", to: "nirmit4868.be22@chitkara.edu.in"
                }
                failure {
                    emailext attachLog: true, body: "Unit and Integration Tests failed. Please check the logs for details.", subject: "Pipeline Notification: Stage 2 Failed", to: "nirmit4868.be22@chitkara.edu.in"
                }
            }
        }

        stage {
            steps {
                echo 'Code Analysis'
                echo 'Description: Integrate code analysis tools like ESLint or SonarQube to analyze the React code and ensure it meets industry standards and best practices. Tool used: ESLint or SonarQube'
            }
        }

        stage {
            steps {
                echo 'Security Scan'
                echo 'Description: Perform a security scan on the React application using tools like OWASP ZAP or other security scanners to identify potential vulnerabilities. Tool used: OWASP ZAP or other security scanners'
            }
            post {
                success {
                    emailext attachLog: true, body: "Security Scan passed successfully.", subject: "Pipeline Notification: Stage 4 Passed", to: "nirmit4868.be22@chitkara.edu.in"
                }
                failure {
                    emailext attachLog: true, body: "Security Scan failed. Please check the logs for details.", subject: "Pipeline Notification: Stage 4 Failed", to: "nirmit4868.be22@chitkara.edu.in"
                }
            }
        }

        stage {
            steps {
                echo 'Deploy to Staging'
                echo 'Description: Deploy the React application to a staging environment (e.g., AWS S3 bucket or Netlify) for testing and preview. Tool used: AWS S3 or Netlify'
            }
        }

        stage {
            steps {
                echo 'Integration Tests on Staging'
                echo 'Description: Run integration tests on the staged React application using tools like Cypress or Selenium to ensure it functions as expected in a production-like environment. Tool used: Cypress or Selenium'
            }
        }

        stage {
            steps {
                echo 'Deploy to Production'
                echo 'Description: Deploy the React application to the production environment (e.g., AWS S3 bucket, Netlify, or a web server). Tool used: AWS S3, Netlify, or a web server'
            }
        }
    }
}
